¡Excelente! Vamos con el Paso 7: Confeccionar las pruebas de unidad usando JUnit.
Como desarrollador Senior, para asegurar que el código es robusto, no necesitamos librerías externas complejas (como Mockito) si no estamos seguros de que las tengas instaladas. Crearemos una implementación simple de Item (un "Stub") dentro de la propia clase de test para simular los artículos. Esto garantiza que el test funcionará al 100% con lo que tienes.
Aquí tienes el código completo para OrderTest.java. Este código cubre todos los casos de la especificación.

Código para OrderTest.java
Copia y pega este contenido en: src/test/java/es/upm/grise/profundizacion/order/OrderTest.java

Java


package es.upm.grise.profundizacion.order;

import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

public class OrderTest {
    
    private Order order;
    
    // Esta clase interna nos ayuda a crear Items para las pruebas
    // sin depender de librerías externas como Mockito.
    private class ItemStub implements Item {
        private Product product;
        private int quantity;
        private double price;

        public ItemStub(Product product, int quantity, double price) {
            this.product = product;
            this.quantity = quantity;
            this.price = price;
        }

        @Override
        public Product getProduct() { return product; }

        @Override
        public int getQuantity() { return quantity; }

        @Override
        public void setQuantity(int quantity) { this.quantity = quantity; }

        @Override
        public double getPrice() { return price; }
    }

    @BeforeEach
    public void setUp() {
        // Se ejecuta antes de cada test para tener una orden limpia
        order = new Order();
    }

    @Test
    public void testOrderIsInitiallyEmpty() {
        // "La lista de items deberá estar vacía, pero no nula."
        assertNotNull(order.getItems());
        assertTrue(order.getItems().isEmpty());
    }

    @Test
    public void testAddItemAddsItemToOrder() throws IncorrectItemException {
        // Preparación
        Product product = new Product();
        product.setId(1);
        Item item = new ItemStub(product, 5, 10.0);

        // Ejecución
        order.addItem(item);

        // Verificación: "Este método añade un item a la order"
        assertEquals(1, order.getItems().size());
        assertEquals(item, order.getItems().iterator().next());
    }

    @Test
    public void testAddItemWithNegativePriceThrowsException() {
        Product product = new Product();
        // Precio negativo (-10.0)
        Item item = new ItemStub(product, 5, -10.0);

        // "El price del item deberá ser mayor o igual a cero... De lo contrario, IncorrectItemException"
        assertThrows(IncorrectItemException.class, () -> {
            order.addItem(item);
        }, "Debería lanzar excepción si el precio es negativo");
    }

    @Test
    public void testAddItemWithZeroQuantityThrowsException() {
        Product product = new Product();
        // Cantidad 0
        Item item = new ItemStub(product, 0, 10.0);

        // "La quantity del item será mayor que cero... De lo contrario, IncorrectItemException"
        assertThrows(IncorrectItemException.class, () -> {
            order.addItem(item);
        }, "Debería lanzar excepción si la cantidad es 0");
    }

    @Test
    public void testAddExistingProductWithSamePriceIncrementsQuantity() throws IncorrectItemException {
        // Creamos un producto
        Product product = new Product();
        product.setId(1);

        // Item 1: Cantidad 5, Precio 10
        Item item1 = new ItemStub(product, 5, 10.0);
        // Item 2: Mismo producto, Cantidad 3, Mismo Precio 10
        Item item2 = new ItemStub(product, 3, 10.0);

        order.addItem(item1);
        order.addItem(item2);

        // "Si el product ya existe... se incrementa la quantity"
        assertEquals(1, order.getItems().size(), "No debería añadir un nuevo elemento a la lista");
        
        // Verificamos que la cantidad sea 5 + 3 = 8
        Item storedItem = order.getItems().iterator().next();
        assertEquals(8, storedItem.getQuantity(), "La cantidad debería haberse sumado");
    }

    @Test
    public void testAddExistingProductWithDifferentPriceAddsNewItem() throws IncorrectItemException {
        // Creamos un producto
        Product product = new Product();
        product.setId(1);

        // Item 1: Precio 10
        Item item1 = new ItemStub(product, 5, 10.0);
        // Item 2: Mismo producto, pero Precio diferente (20)
        Item item2 = new ItemStub(product, 3, 20.0);

        order.addItem(item1);
        order.addItem(item2);

        // "Si el product ya existe... pero el price varía, el nuevo item se añade"
        assertEquals(2, order.getItems().size(), "Deberían haber 2 elementos porque el precio es distinto");
    }
}


Instrucciones para continuar 
Una vez hayas guardado el archivo OrderTest.java:
Ejecuta los tests en tu IDE (clic derecho en el archivo -> "Run Tests") para asegurar que todo sale en verde (✅).
Paso 8: Crea el archivo conv_prueba.txt con esta parte de nuestra conversación.
